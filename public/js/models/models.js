window.Equipe=Backbone.Model.extend({urlRoot:"../equipes",initialize:function(){var a=this;this.partidas=new PartidaCollection;this.partidas.url=function(){return a.url()+"/"+this.id+"/partidas"}}});window.EquipeCollection=Backbone.Collection.extend({model:Equipe,url:function(){return"../equipes"}});window.Fase=Backbone.Model.extend({urlRoot:"../fases",initialize:function(){}});window.FaseCollection=Backbone.Collection.extend({model:Fase,url:function(){return"../fases"}});window.Local=Backbone.Model.extend({urlRoot:"../locais",initialize:function(){}});window.LocalCollection=Backbone.Collection.extend({model:Local,url:function(){return"../locais"}});window.Palpite=Backbone.Model.extend({urlRoot:"../palpites",defaults:{usuario:null,partida:null},initialize:function(){this.usuario=new BolaoCopa.Usuario(this.get("usuario"));this.partida=new Partida(this.get("partida"))}});window.PalpiteCollection=Backbone.Collection.extend({model:Palpite,url:function(){return"../palpites"},comparator:function(a){return a.get("usuario")?[a.get("usuario").nome,a.get("partida").fase_id,a.get("partida").num_partida]:[a.get("partida").fase_id,a.get("partida").num_partida]}});window.Partida=Backbone.Model.extend({urlRoot:"../partidas",initialize:function(){}});window.PartidaCollection=Backbone.Collection.extend({model:Partida,url:function(){return"../partidas"}});window.SessionModel=Backbone.Model.extend({defaults:{access_token:null,usuario_id:null},initialize:function(){return this.load()},authenticated:function(){return Boolean(this.get("access_token"))},save:function(a){$.cookie("usuario_id",a.usuario_id);return $.cookie("access_token",a.session_id)},load:function(){return this.set({usuario_id:$.cookie("usuario_id"),access_token:$.cookie("session_id")})},reset:function(){return this.set({usuario_id:null,access_token:null})}});BolaoCopa.Usuario=Backbone.Model.extend({urlRoot:"../usuarios",defaults:{email:"",nome:"",senha:"",papel:""},initialize:function(){var a=this;this.palpites=new PalpiteCollection;this.palpites.url=function(){return a.url()+"/palpites"}}});BolaoCopa.UsuarioCollection=Backbone.Collection.extend({model:BolaoCopa.Usuario,url:function(){return"../usuarios"}});
